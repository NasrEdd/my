<div class="col-12 my-0 py-0" [ngClass]="{'d-none' : modeAssociation}" >
    <div class="card cardContent h-100 p-0 rounded-3">
        <div class="card-header col-12 m-0 p-0">
            <div class="collapse mt-0 mb-2 p-0" id="collapsingSearchArea">
                <div class="card card-body border-0 px-0 px-lg-2 py-2" style="background-color: transparent;">
                    <div class="col-12 pt-2 pb-0 text-center mb-2 mb-md-1">
                        <form class="d-block text-center d-lg-flex flex-lg-column justify-content-center col-12 px-xl-2 px-2 px-lg-0 px-xl-2">
                            <div class="row col-12 px-0 mx-0">
                                <div class="form-group col-12 col-lg-3 mx-auto mb-2 mb-lg-0 px-1">
                                    <input type="text" class="form-control" name="SrchNom" id="SrchNom" aria-describedby="helpId" [placeholder]="'CURSUSPARSEM.SEARCHAREA.NOM' | translate ">
                                </div>
                                <div class="form-group col-12 col-lg-3 mx-auto mb-2 mb-lg-0 px-1">
                                    <input type="text" class="form-control" name="SrchPrenom" id="SrchPrenom" aria-describedby="helpId" [placeholder]="'CURSUSPARSEM.SEARCHAREA.PRENOM' | translate ">
                                </div>
                                <div class="form-group col-12 col-lg-2 mx-auto mb-2 mb-lg-0 px-1">
                                    <select class="form-select" name="SrchEcole" id="SrchEcole">
                                        <option disabled selected> {{ 'CURSUSPARSEM.SEARCHAREA.ECOLE' | translate }} </option><!-- this is a placeHolder -->
                                        <option> E-PolyTech </option>
                                        <option> ISIAM </option>
                                    </select>
                                </div>
                                <div class="form-group col-12 col-lg-2 mx-auto mb-2 mb-lg-0 px-1">
                                    <select class="form-select" name="SrchAnnee" id="SrchAnnee">
                                        <option selected disabled> {{ 'CURSUSPARSEM.SEARCHAREA.ANNEE' | translate }} </option>
                                        <option> 2020-2021 </option>
                                        <option> 2019-2020 </option>
                                        <option> 2018-2019 </option>
                                    </select>
                                </div>
                                <div class="form-group col-12 col-lg-2 mx-auto mb-2 mb-lg-0 px-1">
                                    <select class="form-select" name="SrchProgramme" id="SrchProgramme">
                                        <option selected disabled> {{ 'CURSUSPARSEM.SEARCHAREA.PROGRAMME' | translate }} </option>
                                        <option> Programme1 </option>
                                        <option> Programme2 </option>
                                    </select>
                                </div>
                            </div>
                            <div class="row col-12 px-0 mx-0 mt-lg-2">
                                <div class="form-group col-12 col-lg-3 mx-auto mb-2 mb-lg-0 px-1">
                                    <input type="text" class="form-control" name="SrchFiliere" id="SrchFiliere" aria-describedby="helpId" [placeholder]="'CURSUSPARSEM.SEARCHAREA.FILIERE' | translate ">
                                </div>
                                <div class="form-group col-12 col-lg-3 mx-auto mb-2 mb-lg-0 px-1">
                                    <select class="form-select" name="SrchNiveau" id="SrchNiveau">
                                        <option selected disabled> {{ 'CURSUSPARSEM.SEARCHAREA.NIVEAU' | translate }} </option>
                                        <option> 4ème année </option>
                                        <option> 3ème année </option>
                                    </select>
                                </div>
                                <div class="form-group col-12 col-lg-2 mx-auto mb-2 mb-lg-0 px-1">
                                    <input type="text" class="form-control" name="SrchSemestre" id="SrchSemestre" aria-describedby="helpId" [placeholder]="'CURSUSPARSEM.SEARCHAREA.SEMESTRE' | translate " >
                                </div>
                                <div class="form-group col-12 col-lg-2 mx-auto mb-2 mb-lg-0 px-1">
                                    <select class="form-select" name="SrchSituation" id="SrchSituation">
                                        <option selected disabled> {{ 'CURSUSPARSEM.SEARCHAREA.SITUATION' | translate }} </option>
                                    </select>
                                </div>
                                <div class="form-group col-12 col-lg-2 mx-auto px-1 text-center">
                                    <button type="button" id="getDataBtn1" class="btn btn-info text-center me-1" style="border-radius: 50%;" data-bs-toggle="tooltip" data-placement="bottom" [title]=" 'DOSSIERETUDIANT.GRIDOTHER.STARTSRCH' | translate " (click)="GetData()"><i class="fas fa-search"></i></button>
                                    <button type="button" id="clearDataBtn1" class="btn btn-warning text-center" style="border-radius: 50%;" data-bs-toggle="tooltip" data-placement="bottom" [title]=" 'DOSSIERETUDIANT.GRIDOTHER.CLEARSRCH' | translate " (click)="clearData()" ><i class="fas fa-times"></i></button>
                                </div>
                            </div>
                        </form>                        
                    </div>
                </div>
                <hr class="text-muted mx-auto col-xl-7 col-4 my-2">
            </div>
            <div class="col-12 d-flex flex-column flex-lg-row justify-content-between my-1 px-2" >
                <div class="text-center text-lg-start">
                    <button type="button" id="printBtn" class="btn btn-indigo me-1 px-3 rounded-15" (click)="openAssociationMode()"><i class="fas fa-link me-2"></i> {{ 'CURSUSPARSEM.GRIDBTNS.ASSOCIATE' | translate }} </button>
                    <button type="button" id="ExcelBtn" class="btn btn-indigo me-1 px-3 rounded-15" (click)="generateExcel()"> <i class="fas fa-file-excel me-2"></i> {{ 'CURSUSPARSEM.GRIDBTNS.EXCELEXPORT' | translate }} </button>
                </div>
                <div class="text-center text-lg-end mt-1 mt-lg-0">
                    <button type="button" id="hideColumnsBtn" class="btn btn-warning text-white px-3 rounded-15 me-1 fs-13px" data-bs-toggle="tooltip" data-bs-placement="bottom" title="{{ 'CURSUSPARSEM.GRIDBTNS.HIDECOLUMNS' | translate }}" (click)="toggleGridColumnsModal()" >
                        <i class="fas fa-eye-slash"></i>
                    </button>
                    <button type="button" id="deleteRowsBtn" class="btn btn-danger px-3 rounded-15 fs-13px" data-bs-toggle="tooltip" data-bs-placement="bottom"  title="{{ 'CURSUSPARSEM.GRIDBTNS.DELETESELECTED' | translate }}" (click)="deleteRows()"> <i class="fas fa-trash-alt"></i> </button>
                </div> 
            </div>
        </div>
        <div class="h-100 card-body p-0" style=" border-bottom-left-radius: 18px; border-bottom-right-radius: 18px;">
            <!-- others -->
            <div class="igx-typography d-block h-100">
                <div class="h-100 d-flex flex-row">
                    <igx-grid #StudentsGrid id="StudentsGrid" [batchEditing]="true" [allowFiltering]="true" [data]="gridConfig.data" [primaryKey]="gridConfig.primaryKey" rowHeight="35px" width="100%" [height]="gridHeight?gridHeight+'px':'100%'" [emptyGridTemplate]="gridEtudiantsEmptyTemplate" [rowEditable]="true" [rowSelection]="'multiple'" [cellSelection]="'none'" [columnSelection]="'none'" displayDensity="compact" (rowSelectionChanging)="handleRowSelection($event)" >
                        <igx-column-group *ngFor="let columngrp of gridConfig.columns" [headerGroupClasses] = " 'justify-content-center'" headerClasses="text-center" [header]=" columngrp.header | translate" [dataType]="columngrp.dataType" [resizable]="columngrp.resizable" [sortable]="columngrp.sortable" [filterable]="columngrp.filterable" [collapsible]="columngrp.collapsible" >
                            <ng-template igxCollapsibleIndicator let-columnT="column">
                                <igx-icon [attr.draggable]="false" #target="tooltipTarget" [igxTooltipTarget]="tooltipRef" [showDelay]="0" [hideDelay]="0">{{columnT.expanded ? 'expand_more' : 'chevron_right'}} </igx-icon>
                                <div #tooltipRef="tooltip" igxTooltip>
                                    <span *ngIf="columnT.expanded"> {{ 'CURSUSPARSEM.GRIDOTHER.COLLAPSE' | translate }} </span>
                                    <span [hidden]="columnT.expanded"> {{ 'CURSUSPARSEM.GRIDOTHER.EXPAND' | translate }} </span>
                                </div>
                            </ng-template>
                            <igx-column *ngFor="let column of columngrp.Columns" [cellClasses]="{'justify-content-center' : true }" headerClasses="text-center" [header]=" column.header | translate " [hidden]="(!column.visible)" [dataType]="column.dataType" [draggable]="column.draggable" [groupable]="column.groupable" [resizable]="column.resizable" [field]="column.field" [sortable]="column.sortable" [filterable]="column.filterable" [editable]="column.editable" [visibleWhenCollapsed]="column.visibleWhenCollapsed" [width]="column.width">
                            </igx-column>
                        </igx-column-group>
                    </igx-grid>
                </div> 
                <ng-template #gridEtudiantsEmptyTemplate>
                    <div class="col-lg-12">
                        <p class="text-muted fs-5 text-center"> {{ 'CURSUSPARSEM.GRIDOTHER.EMPTY' | translate }} </p>
                    </div>
                </ng-template>
            </div>
        </div>
    </div>
    <app-menu-flottant></app-menu-flottant>
</div>
<!-- Modal -->
<div class="modal fade" id="GridColumnsModal" tabindex="-1" aria-labelledby="GridColumnsModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm modal-dialog-centered modal-dialog-scrollable">
        <div class="modal-content ColumnsHidingMenuHeight">
            <div class="modal-header">
                <h5 class="modal-title" id="GridColumnsModalLabel"> {{ 'CURSUSPARSEM.GRIDBTNS.HIDECOLUMNS' | translate }} </h5>
                <button type="button" id="dismissColumnsHideMenuBtn" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body text-start py-1 col-12 mx-0"> 
                <ng-template ngFor let-columnGRP [ngForOf]="gridConfig.columns">
                    <ng-template ngFor let-column [ngForOf]="columnGRP.Columns">
                        <div class="form-check py-2 offset-1" *ngIf="column.allowHide">
                            <label class="form-check-label" >
                                <input type="checkbox" class="form-check-input warning-check-label btn-outline-warning" [(ngModel)]="column.visible" [name]="'is'+column.field+'Hidden'" value="checked">
                                {{ column.header | translate }}
                            </label>
                        </div>
                    </ng-template>
                    <span class="py-1"></span>
                </ng-template>
            </div>
        </div>
    </div>
</div>

<div *ngIf="modeAssociation" class="h-100" style="margin-top: -5px;">
    <app-mode-association (annulerEmitter)="closeAssociationMode($event)" (donneesAssocies)="addRows($event)" [SemestersData]="semestersData" > </app-mode-association>
</div>
